**

1. Настроить удаленный доступ к SRV-KRD по SSH
    

2. На сервере SRV-KRD сервис SSH должен функционировать на порте 2202
    

Заходим в конфиг ssh

Nano /etc/ssh/sshd_config

Меняем порт на нужный по заданию

Port 2202

Выключаем selinux обязательно

Nano /etc/selinux/config

Меняем значение SELINUX на permissive

Сохраняем и выходим, также можно с помощью команды

 sudo setenforce 0 но это будет действовать до перезагрузки, так что лучше в файле

1. Устройство PC-KRD при входе под пользователем user должно иметь доступ к SRV-KRD под пользователем user c использованием SSH ключей, без необходимости ввода пароля.
    

Создаем user

Adduser user

Меняем ему пароль

Passwd user и вводим 2 раза пароль

Дальше заодим на pc-krd в терминал

Пишем команды для того чтобы сгенерировать ключи и перенести их на сервер

ssh-keygen и протыкиваем везде enter

Ssh-copy-id -p 2202 user@192.168.21.2 это переносит ключи на сервер (пишите свой айпи srv-krd)

После этого для проверки можно писать 

Ssh -p 2202 user@192.168.21.2 у вас не будет просить пароль для входа

1. Пользователь user на SRV-KRD должен иметь возможность выполнять команды через sudo без ввода пароля.
    

Нам надо зайти на srv-krd в файл /etc/sudoers

Nano /etc/sudoers

Добавляем в любое место или после root строку

user ALL=(ALL) NOPASSWD:ALL

**
**Теперь при исполнение команды sudo от пользователя user у вас  не будет просить пароль 

1. Подключение к SRV-KRD с PC-KRD из под пользователя user должно осуществляться командой “ssh SRV” без дополнительных параметров.
    

Переходим на pc-krd в терминал и пишем команду

Sudo nano /etc/bashrc

Листаем в самый низ страницы и добавляем следующий небольшой блок кода

ssh() {

If [[ $@==”SRV” ]]; then

Command ssh -p 2202 user@192.168.21.2

Else

Command ssh $@

Fi

}

После этого выходим и сохраняем файл

Проверка: для начала надо перезайти в терминал, закройте его и откройте обратно

Если у вас никаких ошибок вверху не написало значит все работает

Пишем 

Ssh SRV и у нас должно будет просто войти в терминал SRV**